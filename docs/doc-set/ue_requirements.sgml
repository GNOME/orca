<!-- Copyright 2005, Sun Microsystems, Inc. -->

  <!--
  ************************************************************************
  *                                                                      *
  * USER REQUIREMENTS                                                    *
  *                                                                      *
  ************************************************************************
  -->

  <chapter id="userrequirements"><title>User Requirements and Functional Description</title>

    <para>Based upon discussions with end users as well as the tasks
      and ideas from the &personaslink;, Orca must supply at least the
      following end-user features.</para>

    <section id="uravailable"><title>Availability at All Times</title>
      <para>Orca will often be the only vehicle by which many users
        will be able to access the system.  As such, it must be
        available at all times, including at system login and
        screen-saver screens.</para>
      <para>Orca must also be available after the system returns from
        "standby" or "sleep" mode.</para>
      <para>Finally, in the event the user's choice of speech synthesis
        engine becomes unavailable (e.g., expired license), Orca must
        attempt to find and use an alternative synthesis engine.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  LOGIN: Orca will rely upon the accessible
          login feature of gdm to enable access at login.  This
          feature has been tested and verified on Open Solaris with
          Orca V0.2.2.</para>

        <para>&incomplete; SCREEN SAVER: screen saver access has not
          been tested as of Orca V0.2.2. &deliver; V1.0.</para>

      </section>
    </section>

    <section id="urresilient"><title>Failure Resiliency</title>
      <para>In the event that Orca fails or a component of the
        system that Orca depends upon fails, the system should be able
        to heal (and perhaps restart) itself appropriately.</para>
      <section><title>Functional Description and Status</title>

        <para>&incomplete; <ulink
          url="http://bugzilla.gnome.org/show_bug.cgi?id=319652">Bugzilla
          Bug 319652</ulink> is an outstanding Orca bug to track this.
          Much work has been done in this space, but Orca still needs
          to be able to better detect hangs and failures when:</para>

	  <itemizedlist>

	    <listitem><para>Communication with gnome-speech: Failures
	      are currently handled with a restart of the connection
	      to gnome-speech, including providing a fallback to
	      working speech engines.  Hangs, however, are not
	      detected, and can cause Orca to hang. &deliver;
	      V1.0.</para></listitem>

	    <listitem><para>Communication with at-spi: Failures are
	      currently handled somewhat gracefully.  Hangs, however,
	      can occur and are not detected. Some of this may be
	      resolved with a new multi-threaded event queue mechanism
	      to be put in the at-spi registry itself [[[WDW - need
	      pointer to at-spi RFE]]], but Orca still needs to detect
	      and recover from hangs when calling at-spi
	      functions.  &deliver; V1.0.</para></listitem>

	  </itemizedlist>
      </section>
    </section>

    <section id="urkeynav"><title>Seamless Interaction with Traditional Keyboard Navigation
      Methods</title>
      <para>Orca must allow users to navigate through the desktop and
        applications on the desktop using the system keyboard
        navigation gestures (e.g., Alt+Tab to select the next window).
        In other words, Orca must not interfere with traditional
        keyboard navigation.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.3. Orca defines keystrokes for the keypad
          and also makes special used of the "Insert" key as the Orca
          modifier key.  Orca also provides an "orcaModifierKeys"
          customization setting to allow the user to override the Orca
          modifier key.  This setting contains a list of key strings
          that represent the key to be used as the Orca modifier key.
          See the &ugcustomizationlink; section of the &userguidelink;
          for more information.</para>

        <para>&complete; V0.2.2. Furthermore, while the keystrokes
          generally do not interfere with normal and traditional
          keyboard navigation techniques built into the desktop, these
          keystrokes can be overridden and extended if necessary.  See
          the &ugcustomizationlink; section of the &userguidelink; for
          more information.</para>

      </section>

    </section>

    <section id="urinteroperable"><title>Seamless Interaction with Other Assistive
      Technologies</title>
      <para>It is not uncommon for users to simultaneously use other
        assistive technologies, such as the AccessX features of XKB
        <citation><xref linkend="accessx"
        endterm="accessx.abbrev"/></citation>, to access their displays.
        As such, Orca must be able to co-exist (i.e., not interfere)
        with other assistive technologies in use by the user.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; Orca has been simultaneously tested
          with BrlTTY, GOK, and Dasher.  Orca still needs testing,
          however, with Gnopernicus to verify that we can use
          Gnopernicus as a magnification solution while we build out
          magnification support in Orca. &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urstyle"><title>Consistent Style</title>
      <para> It is expected that access to applications will be driven
        primarily via customized "scripts," with a fallback
        ("default") script to be used in the absence of a customized
        script.</para>
      <para>While each script can provide dramatically different
        access to an application, it is expected that scripts will
        provide a users with a consistent style to access
        applications.  To help with this consistent style, Orca will
        provide a &styleguidelink;, a well-documented "default"
        script, and several application scripts that demonstrate and
        promote this style.
      </para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; Orca currently provides a
	  &styleguidelink; and a <literal>default.py</literal> script.
	  However, we need to revisit both to make sure they are in
	  line with each other and up-to-date. &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urscripting"><title>Customizable Behavior Per Application 
      ("Scripting")</title>
      <para>It is expected that the default behavior will provide
        reasonable access to all applications that use the AT-SPI.
        However, to provide dramatically improved access, Orca must be
        able to provide customized behavior for individual
        applications.</para>
      <para>For example, one can envision a script for an e-mail
        application that can provide prioritized access to one's
        inbox.  Another example may be that the script provides
        keyboard access to select and copy displayed text to the
        system clipboard in the event the application doesn't support
        this (e.g., the only way to select text in a terminal window
        is to use a mouse - a script might create new keybindings to
        allow a user to do this from the keyboard).</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; Orca currently provides the
	  framework for customized scripts.  This framework is
	  documented in the &scriptguidelink;.  Over time, however,
	  the team has learned that different toolkits provide
	  different interaction models via the AT-SPI and Orca needs
	  the ability to have a default script per toolkit. This work
	  needs to be done, and should be done in conjunction with
	  the work on the Java platform script (i.e., the Swing toolkit)
	  as well as Firefox (i.e., the Mozilla toolkit).  This refactoring
	  is being tracked in <ulink url="http://bugzilla.gnome.org/show_bug.cgi?id=319668">
	  Bugzilla Bug 319668</ulink>.  &deliver; V1.0.
	</para>

      </section>

    </section>

    <section id="urscripters"><title>Support for Script Writers</title>

      <para>Orca will provide tools and utilities to help the script
        writer.  These utilities not only include a library of useful
        methods to use from scripts, but also runtime tools to help
        the script writer analyze the system in action.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete;  Orca currently has plans to
	  provide support for the following:</para>

        <itemizedlist>
          <listitem>
	    <para>&complete; V0.2.2. Debug utilities to output AT-SPI and input device
	      events. Managed via several debug level settings in the
	      <literal>debug.py</literal> module.</para>
          </listitem>
          <listitem>
	    <para>&complete; V0.2.2. Debug utilities to record and playback keystrokes.
	      Managed via the separate
	      <literal>src/tools/record_keystrokes.py</literal> and
	      <literal>play_keystrokes.py</literal> modules.
	      Keystroke recording can also be enabled by pressing the
	      "Pause" key while running Orca itself.</para>
          </listitem>
          <listitem>
	    <para>&complete; V0.2.2. Debug utilities to record what is being sent to
	      speech and braille. This is managed via the debug level
	      settings.</para>
          </listitem>
          <listitem>
	    <para>&incomplete; Keystroke to speak/braille application with 
	      focus. &deliver; V1.0.</para>
	  </listitem>
          <listitem>
	    <para>&incomplete; Keystroke to speak/braille the current
	      script (and script class) in use. &deliver; V1.0.</para>
	  </listitem>
          <listitem>
	    <para>&complete; V0.2.2. Keystroke to dump all applications.  Insert+F5.</para>
	  </listitem>
          <listitem>
	    <para>&complete; V0.2.2. Keystroke to dump the ancestors of the object with focus.  Insert+F7.</para>
	  </listitem>
          <listitem>
	    <para>&complete; V0.2.2. Keystroke to dump the widget hierarchy of the application with focus. Ctrl+Insert+F7.</para>
	  </listitem>
        </itemizedlist>
      </section>
    </section>

    <section id="urofficeapps"><title>Usable Access to Key Office Productivity Applications</title>
      <para>As needed, Orca will provide custom scripts for key office productivity applications: e-mail, simple text editing, calendaring, contact management, instant messaging, etc.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; V0.2.2.  Orca is targetting the following
          office productivity applications:</para>

        <table><title>Office Productivity Applications</title>
  	  <tgroup cols='3'>
  	    <thead>
  	      <row>
  	        <entry>Application Class</entry>
  	        <entry>Target Application and Version</entry>
  	        <entry>Status</entry>
  	      </row>
            </thead>
  	  
            <tbody>
              <row>
                <entry>Simple Text Editing</entry>
                <entry>GEdit - GNOME 2.16</entry>
                <entry>&complete; V0.2.2</entry>
              </row>
              <row>
                <entry>E-mail</entry>
                <entry>Evolution - GNOME 2.16</entry>
                <entry>&complete; V0.2.2</entry>
              </row>
              <row>
                <entry>Calendar</entry>
                <entry>Evolution - GNOME 2.16</entry>
                <entry>&complete; V0.2.2</entry>       
              </row>
              <row>
                <entry>Contact Management</entry>
                <entry>Evolution - GNOME 2.16</entry>
                <entry>&complete; V0.2.2</entry>
              </row>
              <row>
                <entry>Instant Messaging</entry>
                <entry>GAIM - GNOME 2.16</entry>
                <entry>&complete; V0.2.2</entry>
              </row>
              <row>
                <entry>Help</entry>
                <entry>Yelp - GNOME 2.16</entry>
                <entry>&incomplete; No script and untested. &deliver; V1.0</entry>
              </row>
              <row>
                <entry>Document Generation</entry>
                <entry>StarOffice 8 PP3, OpenOffice 2.0.3 (initial); StarOffice 8 PP4, OpenOffice 2.0.4 (better)</entry>
                <entry>&incomplete; Working with StarOffice team to fix AT-SPI issues; Script under development.  &deliver V1.0</entry>
              </row>
	      <row>
	        <entry>Spreadsheet</entry>
                <entry>StarOffice 8 PP3, OpenOffice 2.0.3 (initial); StarOffice 8 PP4, OpenOffice 2.0.4 (better)</entry>
                <entry>&incomplete; Working with StarOffice team to fix AT-SPI issues; Script under development. &deliver; V1.0</entry>
	      </row>
	      <row>
	        <entry>Presentation</entry>
                <entry>StarOffice 8 PP3, OpenOffice 2.0.3 (initial); StarOffice 8 PP4, OpenOffice 2.0.4 (better)</entry>
                <entry>&incomplete; &deliver; V1.0+.</entry>
	      </row>
	      <row>
	        <entry>Web Browsing</entry>
		<entry>Firefox 2.0 (minimal); Firefox 3.0 (better)</entry>
		<entry>&incomplete; Working with Firefox team to fix issues with
		  accessing the Firefox widget set (XUL) for 2.0 and
		  also working on a structural caret navigation
		  extension for FF2 - &deliver; V1.0.  Working with
		  IBM and Firefox team to provide better information
		  via AT-SPI for FF3 - &deliver; V1.0+.</entry>
	      </row>
	      <row>
	        <entry>Content Viewing</entry>
		<entry>Adobe Reader</entry>
		<entry>&incomplete; &deliver; V1.0</entry>
	      </row>
	      <row>
	        <entry>Java platform</entry>
		<entry>Swing toolkit</entry>
		<entry>&incomplete; Minimal testing, <ulink
		  url="http://bugzilla.gnome.org/show_bug.cgi?id=319639">bug
		  with keycodes</ulink> - &deliver; V1.0</entry>
	      </row>
  	    </tbody>
	  </tgroup>
	</table>

      </section>
    </section>

    <section id="urcustomizable"><title>Configurable Presentation and Interaction</title>
      <para>Different users have different capabilities (e.g., some
        may be able to hear some synthesis voices better than others;
        some may use braille while others do not) and desires (e.g.,
        some may prefer faster speaking rates).  As such, the general
        manner and means by which Orca presents information to the
        user must be configurable by the end user.</para>
      <para>Users must also be able to change configuration settings
        while Orca is running, including the ability to turn
        presentation modes (i.e., speech, braille, magnification) on
        or off without the need to restart Orca.</para>

      <section><title>Functional Description and Status</title>
        <para>&incomplete; The &ugcustomizationlink; section of
	  the &userguidelink; will provide details on the specific
	  customization parameters for Orca. &deliver; V1.0.</para>
      </section>

    </section>

    <section id="urfocustrack"><title>Focus Tracking as the Default Mode</title>
      <para>Known as "focus tracking," Orca must provide a mode
        to track the current region of interest, which is usually the
        object that has keyboard focus.</para>
      <para>When first starting up and when the region of interest has
        changed, Orca must provide a short summary of the region of
        interest, and must also provide a mechanism for the user to
        obtain more detailed information.  The presentation will
        follow the &styleguidelink;.</para>
      <para>When navigating text areas in a character-by-character or
        word-by-word fashion (or any linear fashion for that matter),
        Orca must provide an option to play an audio cue when the
        caret crosses line boundaries.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; does not provide audio cue when crossing linear
	  boundaris.  &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urflatreview"><title>Flat Review Mode</title>
      <para>Orca must provide the ability for a user to review the
        contents of the desktop or a given application.  This is
        typically done by the user making a &wkc; indicating "review,"
        with Orca reacting by presenting the area to be reviewed.  At
        any time, the user can interrupt the review mode, causing
        presentations such as speech output to stop
        immediately.</para>
      <para>Another option for review mode includes the ability to
        use a set of &wkc;s to quickly skim the contents of the
        display.</para>
      <para>In addition, when in flat review mode, Orca will
        optionally allow the mouse to follow the object of interest.
        &todo; this probably should be moved to the user requirements
        instead of the key mappings.</para>
      <para>The review of the desktop will follow the &styleguidelink;,
        and will at least provide a short summary of the available
        applications.  While the review of an application will also
        follow the &styleguidelink;, the overall presentation depends
        largely upon the application being reviewed.</para>
      <para>&todo; Add notions of "hierarchical review," and "hybrid
        review (e.g., in/out of lists)".  Need to flesh out the
        primary purposes of each.</para>
      <para>&todo; Add ability to read a dialog/window.</para>
      <para>&todo; As with navigating text, should Orca have an option to
        play an audio cue when the "next" or "prev" object command takes
        user to a new line?</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  General flat review is working well.</para>

        <para>&incomplete; no automatic reading of dialogs from
          current position or from top left. &deliver; V1.0.</para>

        <para>&incomplete; the mouse doesn't follow the object of interest,
	  nor is there an option to set this. &deliver; V1.0.</para>

	<para>&incomplete; no audio cues when navigating across line
	  boundaries. &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urtextattributes"><title>Presentation of Text and Text Attributes</title>
      <para>For any given piece of text, Orca must provide the ability
        to speak the current character, word, or line.  When speaking
        the current word, Orca must provide the ability to spell it
        out in either letter-by-letter or phonetic (e.g., military
        spelling) mode.  When speaking a line or set of lines, Orca
        must offer the ability to verbalize punctuation, and must provide several levels of punctutation verbalization (none, some, most, all).</para>
      <para>Orca must provide the ability to present the following to the
        user:</para>
      <itemizedlist>
        <listitem>
          <para><emphasis role="bold">Attributes</emphasis> - font size,
            face (bold, italic, etc.), underline, color, etc.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Capitalization</emphasis> - is it
            capital or lower case?</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Selection</emphasis> - is the text
            selected or not?</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Indentation</emphasis> - what is the
            indentation level?</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Bounds</emphasis> - what is the
            bounding box of the text (where and size)?</para>
        </listitem>
      </itemizedlist>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; need to define what to &deliver; V1.0.</para>

      </section>

    </section>
    
    <section id="urlearningmode"><title>Learning Mode (Command Echo)</title>
      <para>Orca must provide a feature that optionally presents the
        command to be invoked when the user presses a key on the
        keyboard or braille display.  All key events in this mode will
        be consumed by Orca, thus allowing the user to freely type
        anything to learn what the effect of the key will be. A
        command being spoken must be able to be interrupted at any
        time.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.</para>

      </section>

    </section>

    <section id="urgestures"><title>Customizable Gestures</title>
      <para>While Orca will provide a default set of well known 
        keyboard and braille &gestureslink;, users must be able to
        override these gestures and extend them with gestures of
        their own choosing.</para>
      <para>The user interface for defining these gestures must be
        easy to use.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  The framework is done as of V0.2.2.
          See the &ugcustomizationlink; section of the &userguidelink;
          for more information.</para>

	<para>&incomplete; the current way to define these is by
	  manually editing the <literal>user-settings.py</literal>
	  file.  &deliver; V1.0+.</para>

      </section>

    </section>

    <section id="urlistapps"><title>"List All Applications" Command</title>
      <para>Orca will provide a means for a user to determine all
        applications running on the desktop as well as all open
        windows on the desktop.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  The <literal>Alt+Tab</literal> support
	  provided by the metacity window manager gives us
	  this.</para>

      </section>

    </section>

    <section id="urwhereami"><title>"Where Am I?" Command</title>
      <para>Orca will provide a means for a user to determine information
        about the current object of interest, including the object
        itself, which window it is in, which application, which
        workspace, etc.</para>
      <para>The object of interest can vary depending upon the mode
        the user is using at the time.  For example, in focus tracking
        mode, the object of interest is the object with keyboard
        focus.  In review mode, the object of interest is the object
        currently being visited, whether it has keyboard focus or
        not.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; currently provides top down "Where am I"
	  functionality only.  Should provide both bottom up and top
	  down.  In addition, the user design for this needs to be
	  better specified.  &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urjumpto"><title>"Jump to Well Known Object" Commands</title>
      <para>There are common locations a user wants to jump to at any
        given time.  These include the title bar, the status bar, the
        toolbar, the beginning of a window, the end of a window, the
        system applet tray, etc.  Orca will provide &wkc;s for Orca to
        enter review mode and set the current well known object to
        one of these objects.  From this point, the user can use a
        &wkc; to go back to the object with focus, give the jumped-to
        object focus if possible, or perform the equivalent of a mouse
        click on the jumped-to object.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; &deliver; V1.0+.</para>

      </section>

    </section>

    <section id="urfind"><title>"Find" Command</title>
      <para>Orca will allow users to enter a string to search for a
	visible text string in the current window or entire desktop.
	If the string is found (e.g., the string matches the
	accessible name of an object or the string matches a string in
	a text area), Orca will switch to "review mode" and make the
	associated object the object of interest.  From this point,
	the user can use a &wkc; to go back to the object with focus,
	give the found object focus if possible, or perform the
	equivalent of a mouse click on the found object.</para>
      <para>In the event the user is a magnification user, the magnifier
        will moved to the found object.</para>
      <para>The search will be performed in the text flow of the
	locale (e.g., left-to-right, top-to-bottom) from the current
	point of interest, wrapping back to the beginning of the
	window if necessary.</para> 
      <para>The search will provide options for requiring a full word
	match (e.g., "ok" will not match "token") or substring match
	(e.g., "ok" will match "token").</para> 
      <para>Finally, the "find" command will also allow the user to
	search for text based on attribute (e.g., "bold"), and the
	search will allow the user to search based solely on attribute
	type, text string, or a combination of both.</para>
      <para>&note; this feature is for searching for visible text
	only.  Traditional searching for text in documents will be
	supported by application functionality (e.g., the "search"
	menu item in the application.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; MUST &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urwatched"><title>Watched Objects</title>
      <para>Orca will allow users to indicate interest in an object.
	Once interest has been given, Orca will notify the user of
	changes to that object, whether it or its window has focus or
	not.  Orca will also provide an option to automatically enter
	review mode and make the watched object the object of
	interest.  From this point, the user can use a &wkc; to go
	back to the object with focus, give the watched object focus
	if possible, or perform the equivalent of a mouse click on the
	watched object.</para>
      <para>In the event the user is a magnification user, the magnifier
        will moved to the found object.  Alternatively, the user may 
        have set up a separate "zoomer" to watch the object.  In this
        case, the zoomer will always reflect the current state of the
        watched object.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; &deliver; V1.0+.</para>

      </section>

    </section>

    <section id="urbookmark"><title>Bookmarked Objects</title>
      <para>Orca will allow users to define a gesture (keyboard or
	braille) that will tell Orca to enter review mode and make a
	particular object the object of interest.  From this point,
	the user can use a &wkc; to go back to the object with focus,
	give the bookmarked object focus if possible, or perform the
	equivalent of a mouse click on the bookmarked object.</para>
      <para>In the event the user is a magnification user, the magnifier
        will moved to the bookmarked object.</para>
      <para>&note; if the specified bookmarked object is not in the
        window with focus, it is not a requirement to jump to the
        bookmarked object.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; &deliver; V1.0+.</para>

      </section>

    </section>

    <section id="urdocread"><title>Document Reading</title>
      <para>When the user navigates the document using document
        navigation techniques, caret movement should always be spoken
        with the appropriate context (e.g. character, word, line)
        depending upon why the caret moved.</para>
      <para>Orca must provide the ability for a user to read the
        contents of a document, such as e-mail or a word processing
        document.  As the document is read, Orca will instruct the
        associated application to scroll so as to keep the portion
        being read visible on the screen (and magnifier).  The
        invocation of the document reading will be triggered via a
        &wkc; and may be stopped at any time by the user.  When the
        review stops, the caret will be positioned at the end of the
        last word spoken (if possible - this depends upon the
        capabilities of the text area as well as the speech
        engine).</para>
      <para>Orca will also provide options to highlight the text
        being spoken.</para>
      <para>&note; while the reading of a document will follow the
        &styleguidelink;, the overall presentation depends largely upon
        the document being read (e.g., is it a text document,
        spreadsheet, web page, etc.?).</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; reading works well in GEdit, including
	  setting the caret position when speech is interrupted.  Does
	  not work well at all in in Evolution, StarOffice, Firefox,
	  etc.  The main issue is the it only speaks the current text
	  object and probably should speak contiguous text objects in
	  the same hierarchy.  MUST &deliver; V1.0.</para>

	<para>&incomplete; text is not highlighted, nor is there an
	  option to do do.  &deliver; V1.0+.</para>

	<para>&incomplete; should audio cues be played when auto
	  reading across line boundaries?</para>

      </section>

    </section>

    <section id="urnonfocus"><title>Ability of Non-focused Windows to Present of
      Information</title>
      <para>Orca must allow for the presentation of information of
        objects that do not have keyboard focus.  While the
        presentation will typically be information on objects that the
        user has requested interest in, it may also come from custom
        scripts that have decided it is important for them to present
        something.  Examples of such information include announcing
        the status of a progress bar, announcing the subject/sender of
        incoming e-mail, etc.</para>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.</para>

      </section>

    </section>

    <section id="urspeech"><title>Speech Synthesis</title>
      <para>One of the primary non-visual ways to present a graphical
        display to a user is via speech synthesis.  Note that Orca
        need not be a speech synthesizer, but it must be able to drive
        one.  The most important functionality Orca needs for speech
        synthesis are as follows:</para>
      <itemizedlist>
        <listitem>
          <para><emphasis role="bold">General Synthesis</emphasis> -
            Orca must be able to speak an utterance (e.g., a word, a
            label, a sentence, etc.) or set of utterances (e.g., a
            paragraph or entire document).  The utterance being spoken
            must be able to interrupted at any time.</para>
          <para>&detail; if at all possible, the synthesis engine
            should be able to tell Orca what has been spoken, allowing
            Orca to synchronize its internal data structures with what
            has been presented to the user via speech.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Voice Styles</emphasis> - Orca
            must be able to identify and allow the user to select
            between the voices available on the various synthesis
            engines available on the system.  In addition, Orca must
            allow the user to customize parameter settings for the
            voices, such as average pitch, speaking rate, and volume.
            The combination of {voice, pitch, rate, volume} will be
            known as a "voice style."  Orca will provide the user with
            the ability to select the voice styles to be used for
            various speaking operations (e.g., default, uppercase,
            warning, alarm, etc.), and may also provide unique "voice
            style sets" depending upon the navigation mode being used
            (e.g., focus tracking, review mode, etc.).  At a minimum,
            Orca will support a "default" style to be used for the
            majority (if not all) of the speaking operations.</para>
        </listitem>
	<listitem>
          <para><emphasis role="bold">Verbalized Caps</emphasis> -
	    When speaking a word beginning with a capital letter, Orca
	    should offer the option of saying "cap" or "all caps"
	    prior to speaking the word in addition to offering an
	    optional uppercase voice. For example, one might hear "cap
	    Willie" or "all caps WILLIE".</para>
        </listitem>
	<listitem>
          <para><emphasis role="bold">Verbalized Links</emphasis> -
	    When speaking a link, Orca should offer the option of
	    saying "link" prior to speaking the link in addition to
	    offering an optional hyperlink voice.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Speaking Rate
            Modification</emphasis> - While the speaking rate will
            generally remained fixed once configured, users may
            sometimes which to speed up or slow down the presentation
            of speech.  While it is ideal that user can do this while
            the synthesis engine is speaking, such functionality is
            typically not provided by the majority of speech synthesis
            engines.  Orca must, however, allow the user to change the
            speaking rate that will be used for the next utterance,
            should the underlying engine support changes to speaking
            rate.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Multilingual Text</emphasis> -
            Orca should provide the ability to speak a single
            utterance that contains words or phrases from multiple
            locales.  This is an emerging area for speech synthesis
            engines, however, so Orca will support this feature if the
            underlying engine(s) support it.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Spelling Mode</emphasis> - Orca
            must be able to optionally spell out words, either letter
            by letter or by military (e.g., alpha, bravo, charlie)
            spelling.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Verbalized
            Punctuation</emphasis> - Orca must be able to optionally
            verbalize punctuation.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Repeated Character
            Count</emphasis> - Orca must be able to optionally
            compress the repetition of character by saying something
            such as "25 dashes" instead of "dash dash dash dash
            dash..."</para>
        </listitem>

      </itemizedlist>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  General synthesis.</para>
        <para>&complete; V0.2.2.  Voice styles done via ACSS.</para>
        <para>&incomplete; Verbalized caps. MUST &deliver; V1.0.</para>
        <para>&incomplete; Verbalized links. MUST &deliver; V1.0.</para>
        <para>&complete; V0.2.2.  Speaking rate modification.
          Insert+{left,right}_arrow.</para>
        <para>&incomplete; Multilingual text.  &deliver; V1.0+.</para>
        <para>&incomplete; Spelling mode. MUST &deliver; V1.0.</para>
        <para>&incomplete; Verbalized punctuation. MUST &deliver; V1.0.</para>
        <para>&incomplete; Repeated character count. MUST &deliver; V1.0.</para>

      </section>

    </section>

    <section id="urecho"><title>Key and Text Echo</title>

      <para>Orca must provide a set of options to allow the user to
        enable the automatic speaking of keys as they are typed,
        alphanumeric characters as they are entered/deleted, and words
        as they are entered.  The speech much be interruptable at any
        time.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; MUST &deliver; V1.0.</para>

        <para>There will be two main options for selecting key and
          word echo: key and word.  These are not mutually
          exclusive.</para>

	<para>Regardless of any setting, if the user deletes a
	  character using the Backspace or Delete keys, the next or
	  previous visible character will be spoken, depending upon
	  which key was used.  If action key echo is enabled (see
	  below), the key causing the deletion should be spoken before
	  the visible character is spoken.</para>

        <para>Key echo applies to the entire keyboard and is for
          echoing keys as they are pressed.  The keys are broken into
          the following groups that the user can optionally enable for
          echoing:</para>

        <itemizedlist>
          <listitem>
	    <para>Alphanumeric and punctuation keys: typing keys that
	      print something on the display, with the exception of
	      space.</para>
	  </listitem>
          <listitem>
	    <para>Modifier keys: CTRL, ALT, Shift, Insert, and "Fn" on laptops.</para>
	  </listitem>
          <listitem>
	    <para>Locking keys: Caps Lock, Num Lock, Scroll Lock, etc.</para>
	  </listitem>
          <listitem>
	    <para>Function keys: The keys at the top of the keyboard.</para>
	  </listitem>
          <listitem>
	    <para>Action keys: space, enter, escape, tab, backspace,
              delete, arrow keys, page up, page down, etc.</para>
	  </listitem>
        </itemizedlist>

        <para>When a key from any enabled group is pressed, the key
          will be spoken.  In the case where a combination of keys is
          pressed, the entire combination should be spoken if the
          group any one of the combined keys has been enabled. For
          example, if you press Shift+f10 and modifiers are to be
          spoken but function keys are not the user should hear "shift
          f ten".</para>

        <para>The echoing of alphanumeric and punctuation keys for
          editable text areas is specialized in that it works with the
          visible text being edited (e.g., one does not hear the
          physical keys being typed when a user is entering a password
          - instead one hears the characters being added or removed
          from the text area).  When typing in editable text areas,
          the alphanumeric and punctuation key echo behaves as
          follows: If key echo is enabled, inserted characters caused
          by typing alphanumeric and punctuation keys will be spoken
          when they are inserted.  &detail; this refers to the total
          visual change in the text area as the result of a single
          user action, which may or may not have a simple and direct
          mapping to the AT-SPI text events.</para>

        <para>Word echo applies to editable text areas only, and
          behaves the following way: If word echo is enabled, words
          will be spoken when the user enters a visible change that
          depicts a word boundary (e.g., punctuation, new line,
          whitespace).  Both the word and the boundary character will
          be sent to speech output, and a separate speech output
          setting (e.g., verbalized punctuation) will be used to
          determine whether to speak the boundary character or
          not.</para>

        <para>Furthermore, if either word or alphanumeric key echo are
	  enabled, Orca will provide the following behavior:</para>

	<itemizedlist>
	  <listitem>
	    <para>If word or alphanumeric key echo are enabled, any
              single character surrounded by whitespace (including
              punctuation) will be spoken.  For example, if the user
              has typed "this .", "period" will be spoken when the
              user inserts a whitespace character.</para>
	  </listitem>
	  <listitem>
	    <para>If word or alphanumeric key echo are enabled, any
	      group of punctuation characters typed in a row will be
	      spoken one at a time when the user inserts a whitespace
	      character.</para>
	  </listitem>
	  <listitem>
	    <para>OPTIONAL: if the user presses the "escape" key in a
	      text area and the text area reverts the text back to
	      what it was, the user should hear this.</para>
	  </listitem>
	</itemizedlist>

      </section>

    </section>

    <section id="urbraille"><title>Refreshable Braille</title>
      <para>Braille is another primary non-visual presentation mode
        for screen readers.  As with speech synthesis, Orca need not
        directly support a braille display, but it must be able to
        drive one.  The primary end requirements for a braille display
        are as follows:</para>
      <itemizedlist>
        <listitem>
          <para><emphasis role="bold">Work with BrlTTY</emphasis> - it
            is not expected that users will abandon character cell
            access to their virtual consoles.  To preserve this access
            (which will be done via BrlTTY), Orca will not interrupt
            or alter the behavior of BrlTTY.</para>
       </listitem>
        <listitem>
          <para><emphasis role="bold">Effective use of
            space</emphasis> - Orca should try to use the cells on the
            braille display as effectively as possible.  This will be
            driven primarily by the &styleguidelink;, and can also
            include the the option to effectively compress white
            space.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Effective use of input
            buttons</emphasis> - Orca should use any input buttons on
            the display as effectively as possible, with the default
            behavior being the equivalent effect of the BrlTTY
            bindings for those buttons.  These functions include
            panning the braille display as well as driving the flat
            review mode.  The functions also include the ability to
            quickly toggle features on and off, such as: toggle
            compression of whitespace, toggle attributes to be shown
            using dots 7-8 or status cells, toggle between grade I and
            grade II, etc.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Effective use of cursor routing
            keys</emphasis> - Orca should enable the cursor routing
            keys to be used to click on objects, set slider values,
            etc.</para>
          <para>In the event there is a second set of cursor routing
            keys, Orca will attempt to make effective use of them
            (e.g., pressing them tells Orca to relay text attribute
            information via speech).</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Effective use of input button
            and cursor routing key combinations</emphasis> - Orca
            should allow the user to use combinations of input buttons
            and/or cursor routing keys to perform operations such as
            selecting text, jumping to bookmarks, etc.</para>
          <para>&note; selection of text using combined keyboard and
            braille actions (e.g., holding the shift key while
            pressing a cursor routing key) may also be
            considered.</para>
          <para>&note; input of text using chording of braille keys
            might be considered, but is not a high priority.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Cursor options</emphasis> - Orca
            should provide the user with the ability to show the cursor
            or not.  If shown, the user should have the ability to make
            it blink, and should also have the ability to tell it to
            either take the entire cell or just dots 7-8.</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Ability to have multiple pan regions
            on the display</emphasis> - watched objects may need to be able
            to remain on a static area of the display (e.g., the rightmost
            10 cells).  The braille support should enable this and should
            also allow the user to pan either the "main" display or the
            watched area.</para>
        </listitem>
      </itemizedlist>

      <section><title>Functional Description and Status</title>

        <para>&complete; V0.2.2.  Work with BrlTTY.</para>
        <para>&incomplete; Effective use of space.  Not addressed at all. &deliver V1.0.</para>
        <para>&incomplete; Effective use of input buttons. Does OK for
          general panning and flat review control, but other
          functionality not supported. &deliver V1.0.</para>
	<para>&incomplete; Effective use of cursor routing keys.
	  Works well for activating components and moving the caret.
	  Second row of cursor routing keys unexplored.  &deliver;
	  V1.0+.</para>
	<para>&incomplete; Key combinations.  Not investigated, can be
	  done via traditional keyboard techniques.  &deliver;
	  V1.0+.</para>
	<para>&incomplete; Cursor options. Rely upon BrlTTY.
	  &deliver; BrlTTY.</para>
	<para>&incomplete; Multiple pan regions. &deliver; V1.0+.</para>
      </section>

    </section>

    <section id="urmag"><title>Synchronization with Screen Magnifiers</title>
      <para>In addition to co-existing with each other, a screen
        magnifier and Orca must be in sync with each other.  For
        example, when Orca is reviewing an area of the screen that is
        larger than the screen magnifier can display at once, Orca
        must inform the screen magnifier that the region of interest
        has changed.</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; &deliver V1.0 or V1.0+, depending upon
          community contributions.</para>

      </section>

    </section>

    <section id="urperf"><title>Acceptable Response Time</title>

      <para>Orca must not degrade the perceptible performance of the
        system.  That is, user should be able to detect any decrease
        is responsiveness of the desktop when the Orca is being used.
        In addition, a user's interaction with Orca should appear as
        crisp and as lively as normal interaction with the display via
        traditional interfaces (e.g., the keyboard).</para>

      <para>Acceptable performance of the speech synthesis output is
        very important.  Orca must be able to provide speech synthesis
        that meets or exceeds the following performance
        metrics:</para>
      <itemizedlist>
        <listitem>
          <para><emphasis role="bold">Time to First Sound</emphasis> -
            The time between when a speech synthesizer gets a request
            to speak and when the synthesizer actually starts speaking
            must be minimal (e.g., less than 30ms).</para>
        </listitem>
        <listitem>
          <para><emphasis role="bold">Time to Cancel</emphasis> - Orca
            must be able to cancel speech synthesis in progress, and
            the time to cancel must be minimal (e.g., less than 30ms).
            Furthermore, the time between when a cancel is issued and
            the time the next utterance is to be spoken must be
            minimal (e.g., less than 30ms).</para>
        </listitem>
      </itemizedlist>
      <para>All updates to the braille display should occur within
        50ms of the time the update command was issued.</para>
      <para>The magnifier should offer smooth performance and show no
        visible lag.</para>

      <section><title>Functional Description and Status</title>

        <note><title>Performance Scope</title> 
          <para>It is understandable that much of the response time may
            be due to factors outside the control of Orca (e.g., Bonobo
            and the underlying speech engine).  As such, the primary
            responsibility of Orca and each application script is to
            process AT-SPI and keyboard events as quickly as possible.
          </para>
        </note>

      </section>

    </section>

    <section id="urdocs"><title>Documentation and Tutorials</title>
      <para> Although it is a reasonable goal that Orca should attempt
        to achieve, users cannot be expected to be able set up and use
        Orca without documentation.  Like other systems, such as JAWS,
        Orca must provide documentation and tutorials on the
        installation, configuration and use of Orca.  This
        documentation must come in form(s) that are accessible to
        people who need to use the screen reader (e.g., accessible
        text and audio).</para>

      <section><title>Functional Description and Status</title>

        <para>&incomplete; documents will continually be updated, as
	  will the Orca web site and WIKI.</para>

      </section>

    </section>

  </chapter>
